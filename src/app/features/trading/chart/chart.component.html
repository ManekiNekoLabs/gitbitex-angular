<div class="chart-wrapper">
  <div class="chart-header">
    <div class="interval-selector">
      <button [class.active]="selectedIntervalIndex === 0" (click)="changeTimeInterval(0)">1m</button>
      <button [class.active]="selectedIntervalIndex === 1" (click)="changeTimeInterval(1)">5m</button>
      <button [class.active]="selectedIntervalIndex === 2" (click)="changeTimeInterval(2)">15m</button>
      <button [class.active]="selectedIntervalIndex === 3" (click)="changeTimeInterval(3)">1h</button>
      <button [class.active]="selectedIntervalIndex === 4" (click)="changeTimeInterval(4)">1d</button>
    </div>
    
    <div class="chart-controls">
      <div class="chart-type-toggle">
        <button [class.active]="chartType === 'candlestick'" (click)="setChartType(ChartType.CANDLESTICK)">
          <span class="chart-type-icon candlestick-icon"></span>
          Candlestick
        </button>
        <button [class.active]="chartType === 'line'" (click)="setChartType(ChartType.LINE)">
          <span class="chart-type-icon line-icon"></span>
          Line
        </button>
      </div>
      
      <div class="zoom-controls">
        <button 
          [class.active]="zoomEnabled" 
          (click)="toggleZoom()" 
          title="Toggle zoom and pan functionality">
          <span class="zoom-icon"></span>
          {{ zoomEnabled ? 'Zoom On' : 'Zoom Off' }}
        </button>
        <button 
          (click)="resetZoom()" 
          title="Reset zoom to default view"
          [disabled]="!zoomEnabled">
          <span class="reset-icon"></span>
          Reset
        </button>
        
        <div class="scale-slider" title="Adjust vertical scale factor">
          <input 
            type="range" 
            [disabled]="!zoomEnabled"
            min="0.1" 
            max="2" 
            step="0.1" 
            [value]="yScaleFactor" 
            (input)="onScaleFactorChange($event)">
        </div>
      </div>
    </div>
  </div>

  <div class="chart-container" title="Vertical Zoom: Use Mouse Wheel | Vertical Pan: Shift+Drag | Drag Y-axis to shift price scale">
    <canvas #chartCanvas class="chart-canvas"></canvas>
  </div>
  
  <!-- Debug information -->
  <div class="chart-debug" [class.show]="showDebug || errorMessage">
    <div *ngIf="errorMessage" class="error-message">
      <div>{{ errorMessage }}</div>
      <div class="error-details">
        The chart data might not be available for ETH/USDT yet. 
        You can try another time interval or check back later.
      </div>
    </div>
    <div *ngIf="!errorMessage && !hasData">
      <div class="loading-info">Loading chart data...</div>
      <div class="spinner"></div>
    </div>
    <div *ngIf="hasData">
      <div>Last update: {{ lastUpdateTime | date:'HH:mm:ss' }}</div>
      <div>Candles loaded: {{ candleCount }}</div>
      <div *ngIf="zoomEnabled" class="zoom-info">
        <div>Vertical Zoom: Mouse Wheel | Vertical Pan: Shift+Drag</div>
        <div>TradingView-style: Drag Y-axis to shift price scale</div>
      </div>
    </div>
  </div>
</div>
